# avito_backend

Штош, на тесты не хватило времени (стыдно)

Запуск на docker compose up, порт можно поменять в docker compose, стандартно 8080

5432 открыт для dbeaver/pgadmin (dbname:test, user:test, password:test)

linter взял у одного из более опытных разработчиков (https://github.com/rostislaved/golangci-lint-config), он старался его сделать как можно строже, я отключил только noinlineerr, 
так как ничего плохого не вижу

Примечания: 

Ogen (генерация сервера под openapi) возможно сомнительное решение для тестового, но было интересно (и полезно?) с ним поработать (+советовали товарищи поопытней), 
понял что спеку под ogen лучше немного подгонять (и возможно вовсе следовать идее conventional errors в ogen), маппинг ошибок в response пытался вынести в отдельную функцию, но
тут странное поведение ogen: если мы указали один эндпоинт с ошибкой, то ErrorResponse будет удовлетворять интерфейсу response, но если 
2 ошибки в эндпоинте то уже идут обертки type ЧтоТоЧтоТоConflict ErrorReponse, и мапперы приходится писать под каждый эндпоинт с 2 ошибками отдельно

Если при merge выясняется, что у пользователя больше никого нет активного в команде, то наверное человеку доверяют, 
поэтому автоматически делаю merge,
НО возможно стоило merge делать внутри той же транзакции,
однако это было бы копированием уже существующего метода (только использовать tx.Exec()), не уверен как тут поступать (все таки надо было бы скопировать наверное)

Можно было бы добавить валидацию, например username длиной от 4 до 15, но в спеке не было ничего, поэтому пойдет наверное?

Старался делать код лучшего качества, но предчувствие такое, что можно писать сильно лучше (и очень сильно улучшить читаемость)

P.S. Если не лень напишите пожалуйста на tg @teryble09 хотя бы в 2 предложениях, что не так, и над чем поработать
